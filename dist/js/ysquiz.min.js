/*! ysquiz v1.0.0 | Yusuf SEZER <yusufsezer@mail.com> | MIT License | https://github.com/yusufsefasezer/ysQuiz.js */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.ysQuiz=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(l){"use strict";var p={wrapper:".ysquiz",title:"ysQuiz",enumerator:!0},d=function(){var r={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(var i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?r[t]=d(!0,r[t],e[t]):r[t]=e[t])};e<t;e++){i(arguments[e])}return r};return function(e,t){var i={},o=null,s=[],u={currentQuestion:0,finished:!1,numOfCorrect:0,numOfWrong:0,reset:function(){this.currentQuestion=0,this.finished=!1}};i.init=function(e,t){if(!("querySelector"in document&&"addEventListener"in l&&"classList"in document.createElement("div")))throw"ysQuiz: This browser does not support the required JavaScript methods and browser APIs.";if(i.destroy(),(o=d(p,t||{})).wrapper="string"==typeof o.wrapper?document.querySelector(o.wrapper):o.wrapper,!(o.wrapper instanceof HTMLElement))throw new TypeError("ysQuiz: Please select a valid quiz wrapper.");if(o.wrapper.classList.add("ysquiz"),Array.isArray(e))for(var r=0,n=e.length;r<n;r++)i.addQuestion(e[r].question,e[r].answers,e[r].correct);i.setup()},i.addQuestion=function(e,t,r){if(!Array.isArray(t))throw new TypeError("ysQuiz: Answers must be array.");s.push(new n(e,t,r))},i.setup=function(){if(0!=s.length&&o){var e='<div class="ysquiz-header"><h1>'+o.title+"</h1></div>";e+='<div class="ysquiz-content"><div class="ysquiz-question"></div></div>',e+='<div class="ysquiz-footer"><p class="ysquiz-message"></p></div>',o.wrapper.innerHTML=e,0<s.length&&s[u.currentQuestion].render(o.wrapper.querySelector(".ysquiz-question"))}},i.destroy=function(){o&&(o.wrapper.innerHTML=null,o=null,s.length=0,u.reset())};var n=function(e,t,r){var n,i;this.question=e,this.answers=t,this.selected=-1,this.correctIndex=(n=0,i=t.length,Math.floor(Math.random()*(i-n+1))+n),t.splice(this.correctIndex,0,r)};n.prototype.checkAnswer=function(){return this.selected==this.correctIndex},n.prototype.render=function(e){var t=this;e.innerHTML=null,e.innerHTML+='<h3 class="ysquiz-question-title">'+(!0===o.enumerator?u.currentQuestion+1+". ":"")+" "+this.question+"</h3>";for(var r=document.createElement("ul"),n=0,i=this.answers.length;n<i;n++)r.innerHTML+='<li><label><input type="radio" name=question'+(u.currentQuestion+1)+" />"+this.answers[n]+"</label></li>";var s=document.createElement("button");s.textContent="Next",s.addEventListener("click",function(){c(this,t)}),e.appendChild(r),e.appendChild(s)};var c=function(e,t){if(u.finished){var r='<div class="ysquiz-result">';return r+="<h3>Result:</h3>",r+='<p class="ysquiz-total-question">'+s.length+" question</p>",r+='<p class="ysquiz-total-correct">'+u.numOfCorrect+" correct</p>",r+='<p class="ysquiz-total-wrong">'+u.numOfWrong+" wrong</p>",r+="</div>",void(o.wrapper.querySelector(".ysquiz-content").innerHTML=r)}var n=o.wrapper.querySelectorAll("input[type=radio]"),i=o.wrapper.querySelector(".ysquiz-message");if(t.selected=a(n),-1!==t.selected){if(i.innerHTML=null,t.checkAnswer()?u.numOfCorrect++:u.numOfWrong++,u.currentQuestion++,s.length==u.currentQuestion)return e.textContent="Show Results",void(u.finished=!0);0<s.length&&u.currentQuestion<s.length&&s[u.currentQuestion].render(o.wrapper.querySelector(".ysquiz-question"))}else i.textContent="Please select a answer!"},a=function(e){for(var t=0,r=e.length;t<r;t++)if(e[t].checked)return t;return-1};return i.init(e,t),i}});